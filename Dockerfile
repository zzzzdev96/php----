# استخدم صورة PHP-FPM الرسمية (الفرع 8.2 هو الأحدث نسبياً ومناسب)
FROM php:8.2-fpm

# تعيين دليل العمل داخل الحاوية. هذا هو المكان الذي ستوضع فيه ملفات تطبيقك.
WORKDIR /var/www/html

# نسخ جميع ملفات مشروعك من المستودع الحالي إلى دليل العمل داخل الحاوية.
# النقطة الأولى '.' تعني "المجلد الحالي على جهازك"، والنقطة الثانية '.' تعني "دليل العمل داخل الحاوية".
COPY . /var/www/html

# تثبيت ملحقات PHP الضرورية إذا كنت تستخدم قواعد بيانات (مثل MySQL/MariaDB) أو تحتاج CURL، إلخ.
# الكود الخاص بك يستخدم CURL، لذا من المهم تثبيته.
# mysqli و pdo_mysql مفيدان إذا كنت ستتصل بقواعد بيانات MySQL.
RUN docker-php-ext-install curl mysqli pdo pdo_mysql

# تثبيت Composer إذا كنت تخطط لإدارة تبعيات PHP في المستقبل (ليس ضروريًا لكودك الحالي ولكنها ممارسة جيدة).
# إذا لم تكن تستخدم Composer، يمكنك حذف هذين السطرين.
# COPY --from=composer:latest /usr/bin/composer /usr/local/bin/composer

# تشغيل أي أوامر إضافية بعد نسخ الملفات وتثبيت الملحقات (مثال: تحديث تبعيات Composer)
# إذا قمت بتضمين Composer أعلاه، يمكنك تفعيل هذا السطر:
# RUN composer install --no-dev --optimize-autoloader

# تعريض المنفذ 9000، وهو المنفذ الافتراضي الذي يستمع عليه PHP-FPM.
EXPOSE 9000

# الأمر الذي سيتم تشغيله عند بدء تشغيل الحاوية. هذا يبدأ خدمة PHP-FPM.
CMD ["php-fpm"]